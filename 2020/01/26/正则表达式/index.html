<!DOCTYPE html>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

  <meta name="description" content="浅记正则表达式是对字符串(普通字符和特殊字符)操作的一种逻辑公式，即一种特殊的文本模式。正则表达式的组件可以是单个字符、字符集合、字符范围、字符间的选择或者所有这些组件的任意组合。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。 
普通字符没有显式指定为元字符的所有可打印和不可打印字">


<link rel="alternate" href="/atom.xml" title="Gu Chuan&#39;s blog" type="application/atom+xml">
<meta name="theme-color" content="#a1d0f6">
<title>正则表达式 - Gu Chuan&#39;s blog</title>
<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="shortcut icon" href="/favicon.png">
<link rel="stylesheet" href="/css/style.css">
<nav class="main-nav">
	
	    <a href="/">← Home</a>
	
	
	    <a href="/about/">About</a>
	
	    <a href="/archives/">Archives</a>
	
	    <a href="/links/">Links</a>
	
	<a class="cta" href="/atom.xml" data-no-instant>Subscribe</a>
</nav>

<section id="wrapper">
    <article class="post">
    <header>
        
            <h1>正则表达式</h1>
        
        <h2 class="headline">Jan 26 2020
        
        </h2>
    </header>
</article>
<section id="post-body"><h1 id="浅记"><a href="#浅记" class="headerlink" title="浅记"></a>浅记</h1><p><a href="https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1700215?fr=aladdin" target="_blank" rel="noopener">正则表达式</a>是对字符串(普通字符和特殊字符)操作的一种逻辑公式，即一种特殊的文本模式。正则表达式的组件可以是单个字符、字符集合、字符范围、字符间的选择或者所有这些组件的任意组合。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。 </p>
<p><code>普通字符</code>没有显式指定为元字符的所有可打印和不可打印字符，即没有被指定为元字符的所有大小写字母、数字、标点符号和一些其他符号。 </p>
<p><code>特殊字符(元字符)</code>含有特殊含义的字符。若要匹配元字符，必须使用转义字符 \ 将其转义，再进行匹配。 </p>
<table>
<thead>
<tr>
<th>特别字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>$</td>
<td>匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 ‘\n’ 或 ‘\r’。要匹配 $ 字符本身，请使用 \ $。</td>
</tr>
<tr>
<td>( )</td>
<td>标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 \ ( 和 \ )。</td>
</tr>
<tr>
<td>*</td>
<td>匹配前面的子表达式零次或多次。要匹配 * 字符，请使用 \ *。</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 \ +。</td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符 \n 之外的任何单字符。要匹配 . ，请使用 \ . 。</td>
</tr>
<tr>
<td>[</td>
<td>标记一个中括号表达式的开始。要匹配 [，请使用 \ [。</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 ?。</td>
</tr>
<tr>
<td>\</td>
<td>将下一个字符标记为特殊字符、原义字符、向后引用、八进制转义符。例如， ‘n’ 匹配字符 ‘n’。’\n’ 匹配换行符。序列 ‘\ \ ‘ 匹配 “ \ “，而 ‘\ (‘ 则匹配 “(“。</td>
</tr>
<tr>
<td>^</td>
<td>匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。要匹配 ^ 字符本身，请使用 ^。</td>
</tr>
<tr>
<td>{</td>
<td>标记限定符表达式的开始。要匹配 {，请使用 \ {。</td>
</tr>
<tr>
<td>|</td>
<td>指明两项之间的一个选择。要匹配 |，请使用 \ |。</td>
</tr>
</tbody></table>
<p><code>限定符</code>指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。</p>
<table>
<thead>
<tr>
<th>限定字符（贪婪）</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>匹配前面的子表达式零次或多次。例如，zo* 能匹配 “z” 以及 “zoo”。* 等价于{0,}。</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 、 “does” 中的 “does” 、 “doxy” 中的 “do” 。? 等价于 {0,1}。</td>
</tr>
<tr>
<td>{n}</td>
<td>n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td>
</tr>
<tr>
<td>{n,}</td>
<td>n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td>
</tr>
<tr>
<td>{n,m}</td>
<td>m 和 n 均为非负整数，其中n &lt;= m，最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td>
</tr>
</tbody></table>
<blockquote>
<p> 请注意，限定符出现在范围表达式之后。因此，它应用于整个范围表达式。</p>
<p>单个*、+、？匹配是贪婪匹配，该表达式会尽可能多的匹配文字 。而通过在 *、+ 或 ? 限定符之后放置 ?，该表达式从贪婪匹配转换为惰性匹配(最小匹配)。 </p>
</blockquote>
<table>
<thead>
<tr>
<th>限定字符（惰性）</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>*?</td>
<td>匹配前面的子表达式零次或多次，但尽可能减少匹配。例如，’a.* ? b’匹配 “acbacb” 中的acb。</td>
</tr>
<tr>
<td>+?</td>
<td>匹配前面的子表达式一次或多次，但尽可能减少匹配。例如，’a+?’ 匹配 “acbacb” 中的a。</td>
</tr>
<tr>
<td>??</td>
<td>匹配前面的子表达式零次或一次，但尽可能减少匹配。例如，’a.??b’ 匹配 “aaacb” 中的 acb 。</td>
</tr>
<tr>
<td>{n}?</td>
<td>n 是一个非负整数。匹配确定的 n 次，但尽可能减少匹配。例如，’o{2}?’ 匹配 “fooood” 中的oo。</td>
</tr>
<tr>
<td>{n,}?</td>
<td>n 是一个非负整数。至少匹配n 次，但尽可能减少匹配。例如，’o{2,}?’ 匹配”foooood” 中的oo。</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>m 和 n 均为非负整数，其中n &lt;= m，最少匹配 n 次且最多匹配 m 次，但尽可能减少匹配。例如，’o{1,3}?’ 匹配 “fooooood” 中的o。请注意在逗号和两个数之间不能有空格。</td>
</tr>
</tbody></table>
<p><code>定位符</code>将正则表达式固定到行首或行尾。</p>
<table>
<thead>
<tr>
<th>定位字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</td>
</tr>
<tr>
<td>$</td>
<td>匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词边界，即字与空格之间的位置。如果它位于要匹配的字符串的开始，它在单词的开始处查找匹配项。如果它位于字符串的结尾，它在单词的结尾处查找匹配项。</td>
</tr>
<tr>
<td>\B</td>
<td>非单词边界匹配。</td>
</tr>
</tbody></table>
<blockquote>
<p>注：不能将限定符与定位符一起使用，即不允许诸如 ^* 之类的表达式。 。</p>
</blockquote>
<table>
<thead>
<tr>
<th>非打印字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>\cx</td>
<td>匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个换页符。等价于 \x0c 和 \cL。</td>
</tr>
<tr>
<td>[\ b]</td>
<td>匹配一个回退符。</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符。等价于 \x0a 和 \cJ。</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符。等价于 \x0d 和 \cM。</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符。等价于 \x09 和 \cI。</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任何非空白字符。等价于 [ ^ \f\n\r\t\v ]。</td>
</tr>
<tr>
<td>\d</td>
<td>匹配一个数字字符。等价于 [0-9]。</td>
</tr>
<tr>
<td>\D</td>
<td>匹配一个非数字字符。等价于 [ ^0-9]。</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母、数字、下划线。等价于[A-Za-z0-9_]。</td>
</tr>
<tr>
<td>\W</td>
<td>匹配非字母、数字、下划线。等价于 [ ^A-Za-z0-9_]。</td>
</tr>
<tr>
<td>\xn</td>
<td>匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，’\x41’ 匹配 “A”。’\x041’ 则等价于 ‘\x04’ &amp; “1”。正则表达式中可以使用 ASCII 编码。</td>
</tr>
<tr>
<td>\num</td>
<td>匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，’(.)\1’ 匹配两个连续的相同字符。</td>
</tr>
<tr>
<td>\n</td>
<td>标识一个八进制转义值或一个向后引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。</td>
</tr>
<tr>
<td>\nm</td>
<td>标识一个八进制转义值或一个向后引用。如果 \nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \nm  之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \nm  将匹配八进制转义值 nm。</td>
</tr>
<tr>
<td>\nml</td>
<td>如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。</td>
</tr>
<tr>
<td>\un</td>
<td>匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \u00A9 匹配版权符号 (?)。</td>
</tr>
</tbody></table>
<p><code>字符簇</code> 一种更自由的描述我们要的模式 ，但一个字符簇只表示一个字符。</p>
<table>
<thead>
<tr>
<th>字符簇</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>[AaEeIiOoUu]</td>
<td>与任何元音字符匹配，但只能表示一个字符。</td>
</tr>
<tr>
<td>[^xyz]</td>
<td>负值字符集合。匹配未包含的任意字符。</td>
</tr>
<tr>
<td>[a-z]</td>
<td>匹配所有的小写字母。</td>
</tr>
<tr>
<td>[A-Z]</td>
<td>匹配所有的大写字母。</td>
</tr>
<tr>
<td>[a-zA-Z]</td>
<td>匹配所有的字母。</td>
</tr>
<tr>
<td>[0-9]</td>
<td>匹配所有的数字。</td>
</tr>
<tr>
<td>[0-9\ .\ -]</td>
<td>匹配所有的数字，句号和减号。</td>
</tr>
<tr>
<td>[ \f\r\t\n]</td>
<td>匹配所有的白字符。</td>
</tr>
</tbody></table>
<p><code>PHP特殊字符簇</code></p>
<table>
<thead>
<tr>
<th>PHP正则表达式中内置通用字符簇</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>[[:alpha:]]</td>
<td>任何字母</td>
</tr>
<tr>
<td>[[:digit:]]</td>
<td>任何数字</td>
</tr>
<tr>
<td>[[:alnum:]]</td>
<td>任何字母和数字</td>
</tr>
<tr>
<td>[[:space:]]</td>
<td>任何空白字符</td>
</tr>
<tr>
<td>[[:upper:]]</td>
<td>任何大写字母</td>
</tr>
<tr>
<td>[[:lower:]]</td>
<td>任何小写字母</td>
</tr>
<tr>
<td>[[:punct:]]</td>
<td>任何标点符号</td>
</tr>
<tr>
<td>[[:xdigit:]]</td>
<td>任何16进制的数字，相当于[0-9a-fA-F]</td>
</tr>
</tbody></table>
<p><code>分组字符</code>提取匹配字符串。 所有以 ( 和 ) 元字符所包含的正则表达式被分为一组，每一个分组都是一个子表达式。</p>
<table>
<thead>
<tr>
<th>分组字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>(pattern)</td>
<td>匹配 pattern 并获取这一匹配。所获取的匹配可以从产生的 Matches 集合得到，在VBScript 中使用 SubMatches 集合，在JScript 中则使用 $0…$9 属性。要匹配圆括号字符，请使用 ‘(‘ 或 ‘)‘。</td>
</tr>
<tr>
<td>(?:pattern)</td>
<td>匹配 pattern 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用 “或” 字符 (|)  来组合一个模式的各个部分是很有用。例如， ‘industr(?:y|ies) 就是一个比 ‘industry|industries’  更简略的表达式。</td>
</tr>
<tr>
<td>(？=pattern)</td>
<td>正向肯定预查（look ahead positive  assert），在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，”Windows(?=95|98|NT|2000)”能匹配”Windows2000”中的”Windows”，但不能匹配”Windows3.1”中的”Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</td>
</tr>
<tr>
<td>(?!pattern)</td>
<td>正向否定预查(negative  assert)，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如”Windows(?!95|98|NT|2000)”能匹配”Windows3.1”中的”Windows”，但不能匹配”Windows2000”中的”Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</td>
</tr>
<tr>
<td>(?&lt;=pattern)</td>
<td>反向(look behind)肯定预查，与正向肯定预查类似，只是方向相反。例如，”(?&lt;=95|98|NT|2000)Windows”能匹配”2000Windows”中的”Windows”，但不能匹配”3.1Windows”中的”Windows”。</td>
</tr>
<tr>
<td>(?&lt;!pattern)</td>
<td>反向否定预查，与正向否定预查类似，只是方向相反。例如”(?”能匹配”3.1Windows”中的”Windows”，但不能匹配”2000Windows”中的”Windows”。</td>
</tr>
</tbody></table>
<p><code>修饰符</code>用于控制正则表达式各方面的匹配，在第二个斜杆字符后指定。</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>/正则表达式/i</td>
<td>当匹配文本时忽略大小写。</td>
</tr>
<tr>
<td>/正则表达式/g</td>
<td>全文查找出现的所有匹配字符。</td>
</tr>
<tr>
<td>/正则表达式/gi                             /正则表达式/ig</td>
<td>全文查找、忽略大小写。</td>
</tr>
<tr>
<td>/正则表达式/o</td>
<td>只执行一次 #{} 插值，正则表达式在第一次时就进行判断。</td>
</tr>
<tr>
<td>/正则表达式/x</td>
<td>忽略空格，允许在整个表达式中放入空白符和注释。</td>
</tr>
<tr>
<td>/正则表达式/m</td>
<td>匹配多行，把换行字符识别为正常字符。</td>
</tr>
<tr>
<td>/正则表达式/u,e,s,n</td>
<td>把正则表达式解释为 Unicode（UTF-8）、EUC、SJIS 或 ASCII。如果没有指定修饰符，则认为正则表达式使用的是源编码。</td>
</tr>
</tbody></table>
<p><code>正则表达式之运算符优先级</code></p>
<p>正则表达式从左到右进行计算，并遵循优先级顺序。 即相同优先级的从左到右进行运算，不同优先级的运算先高后低。 </p>
<table>
<thead>
<tr>
<th>运算符(高到低)</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>\</td>
<td>转义符</td>
</tr>
<tr>
<td>(), (?:), (?=), []</td>
<td>圆括号和方括号</td>
</tr>
<tr>
<td>*, +, ?, {n}, {n,}, {n,m}</td>
<td>限定符</td>
</tr>
<tr>
<td>^, $, \任何元字符、任何字符</td>
<td>定位点和序列（即：位置和顺序）</td>
</tr>
<tr>
<td>|</td>
<td>替换，”或”操作  字符具有高于替换运算符的优先级，使得”m|food”匹配”m”或”food”。若要匹配”mood”或”food”，请使用括号创建子表达式，从而产生”(m|f)ood”。</td>
</tr>
</tbody></table>
<p><img src="/2020/01/26/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/zhengze.png" alt></p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><table>
<thead>
<tr>
<th>正则表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>/\b([a-z]+) \1\b/gi</td>
<td>一个单词连续出现的位置。</td>
</tr>
<tr>
<td>/(\w+)://([ ^/:]+)(:\d * )?([ ^# ]*)/</td>
<td>将一个URL解析为协议、域、端口及相对路径。</td>
</tr>
<tr>
<td>/^(?:Chapter|Section) [1-9] [0-9]{0,1}$/</td>
<td>定位章节的位置。</td>
</tr>
<tr>
<td>/[-a-z]/</td>
<td>a至z共26个字母再加一个-号。</td>
</tr>
<tr>
<td>/ter\b/</td>
<td>可匹配chapter，而不能匹配terminal。</td>
</tr>
<tr>
<td>/\Bapt/</td>
<td>可匹配chapter，而不能匹配aptitude。</td>
</tr>
<tr>
<td>/Windows(?=95 |98 |NT )/</td>
<td>可匹配Windows95或Windows98或WindowsNT，当找到一个匹配后，从Windows后面开始进行下一次的检索匹配。</td>
</tr>
<tr>
<td>/^\s*$/</td>
<td>匹配空行。</td>
</tr>
<tr>
<td>/\d{2}-\d{5}/</td>
<td>验证由两位数字、一个连字符再加 5 位数字组成的 ID 号。</td>
</tr>
<tr>
<td>/&lt;\s* (\S+)(\s[ ^&gt;]* )?&gt;[\s\S]* &lt;\s* /\1\s*&gt;/</td>
<td>匹配 HTML 标记。</td>
</tr>
</tbody></table>
</section>
    
        
        <h2 class="footline">
            <a href="/tags/knowledge/#knowledge">knowledge</a>
        </h2>
    

    <footer id="post-meta" class="clearfix">
        <a href="/about/">
        <img class="avatar" src="/images/guchuan.JPG">
        <div>
            <span class="dark">Gu Chuan&#39;s blog</span>
            <span>没学过从来不是理由</span>
        </div>
        </a>
        <section id="sharing">
            <a title="Share to Twitter" class="twitter" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/01/26/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ - 正则表达式 @" target="_blank" rel="noopener"><span class="icon-twitter">tweet</span></a>
            <a title="Share to Facebook" class="facebook" href="#" onclick="
                window.open(
                  'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
                  'facebook-share-dialog',
                  'width=626,height=436');
                return false;"><span class="icon-facebook-sign">Share</span>
            </a>
        </section>
    </footer>


  <section id="comment">
    <button class="btn" id="loadcmts" onclick="cmts.load();">Load Comments</button>
    <div id="gitment"></div>
    <script src='/js/gitment.browser.js'></script>
    <link rel="stylesheet" href=''>
    <script>
      var cmts={
        load:function cmts(){
          var gitment = new Gitment({
          
            id: "正则表达式",
          
            owner: "",
            repo: "",
            oauth: {
              client_id: "",
              client_secret: "",
            },
          })
          gitment.render('gitment');
          var loadcmt = document.getElementById("loadcmts");
          var imyourfather = loadcmt.parentNode;
          imyourfather.removeChild(loadcmts)
        }
      }
    </script>
  </section>


	<footer id="footer">
	<div id="social">
		<p class="small">©  Gu Chuan&#39;s blog| Powered by Hexo & 
			<a href="https://github.com/F0r3at/Lights" target="_blank" rel="noopener"> Lights</a>
		</p>
	</div>
</footer>

</section>

	<script src="//cdnjs.loli.net/ajax/libs/instantclick/3.0.1/instantclick.min.js" data-no-instant></script>
	<script data-no-instant>
		
		InstantClick.init('mousedown');
	</script>



