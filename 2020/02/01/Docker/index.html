<!DOCTYPE html>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

  <meta name="description" content="Docker 一个开源的应用容器引擎，开发者可以打包应用以及依赖包到一个可移植的镜像中， 发布到任何流行的 Linux或Windows 机器上 ，实现虚拟化。其基于 Go语言 并遵从 Apache2.0 协议开源。容器是完全使用沙箱机制,相互之间不会有任何接口。  
一个完整的Docker有以下几个">


<link rel="alternate" href="/atom.xml" title="Gu Chuan&#39;s blog" type="application/atom+xml">
<meta name="theme-color" content="#a1d0f6">
<title>Docker - Gu Chuan&#39;s blog</title>
<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="shortcut icon" href="/favicon.png">
<link rel="stylesheet" href="/css/style.css">
<nav class="main-nav">
	
	    <a href="/">← Home</a>
	
	
	    <a href="/about/">About</a>
	
	    <a href="/archives/">Archives</a>
	
	    <a href="/links/">Links</a>
	
	<a class="cta" href="/atom.xml" data-no-instant>Subscribe</a>
</nav>

<section id="wrapper">
    <article class="post">
    <header>
        
            <h1>Docker</h1>
        
        <h2 class="headline">Feb 01 2020
        
        </h2>
    </header>
</article>
<section id="post-body"><blockquote>
<p><a href="https://baike.baidu.com/item/Docker/13344470?fr=aladdin" target="_blank" rel="noopener">Docker</a> 一个开源的应用容器引擎，开发者可以打包应用以及依赖包到一个可移植的镜像中， 发布到任何流行的 Linux或Windows 机器上 ，实现虚拟化。其基于 Go语言 并遵从 Apache2.0 协议开源。容器是完全使用沙箱机制,相互之间不会有任何接口。  </p>
<p>一个完整的Docker有以下几个部分组成：</p>
<ol>
<li>DockerClient客户端  ： Docker 客户端通过命令行或者其他工具使用 Docker SDK  与 Docker 的守护进程通信。 </li>
<li>Docker Daemon守护进程  ：  一般 在宿主主机后台运行，等待接收来自客户端的消息。 </li>
<li>Docker Image镜像  ：Docker 镜像是用于创建 Docker 容器的模板。 </li>
<li>DockerContainer容器  ： 容器是独立运行的一个或一组应用，是镜像运行时的实体。 </li>
</ol>
</blockquote>
<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><blockquote>
<p>docker      </p>
<p>查看到 Docker 客户端的所有命令选项。</p>
<p>docker command –help</p>
<p>查看指定的 Docker 命令使用方法。</p>
</blockquote>
<p><code>network</code>创建一个新的 Docker 网络</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network create -d bridge netname</span><br><span class="line">    -d : 参数指定 Docker 网络类型，有 bridge、overlay。</span><br></pre></td></tr></table></figure>

<p><code>run</code>  创建一个新的容器并运行一个命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br><span class="line">    -a stdin : 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项。</span><br><span class="line">    -d : 后台运行容器，并返回容器ID。</span><br><span class="line">    -i : 以交互模式运行容器，通常与 -t 同时使用。</span><br><span class="line">    -P : 随机端口映射，容器内部端口随机映射到主机的高端口。</span><br><span class="line">    -p : 指定端口映射，格式为：主机(宿主)端口:容器端口。</span><br><span class="line">    -t : 为容器重新分配一个伪输入终端，通常与 -i 同时使用。</span><br><span class="line">    -m : 设置容器使用内存最大值。</span><br><span class="line">    --name=&quot;nginx-lb&quot; : 为容器指定一个名称。</span><br><span class="line">    --dns 8.8.8.8 : 指定容器使用的DNS服务器，默认和宿主一致。</span><br><span class="line">    --dns-search example.com : 指定容器DNS搜索域名，默认和宿主一致。</span><br><span class="line">    -h &quot;mars&quot; : 指定容器的hostname。</span><br><span class="line">    -e username=&quot;ritchie&quot; : 设置环境变量。</span><br><span class="line">    --env-file=[] : 从指定文件读入环境变量。</span><br><span class="line">    --cpuset=&quot;0-2&quot; or --cpuset=&quot;0,1,2&quot; : 绑定容器到指定CPU运行。</span><br><span class="line">    --net=&quot;bridge&quot; : 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型。</span><br><span class="line">    --link=[] : 添加链接到另一个容器。</span><br><span class="line">    --expose=[] : 开放一个端口或一组端口。</span><br><span class="line">    --volume , -v : 绑定一个卷。</span><br><span class="line">注：如只使用ubuntu，docker将默认使用ubuntu:latest镜像。</span><br><span class="line">   docker run -d -P training/webapp python app.py</span><br><span class="line">   创建了一个 python 应用的容器。</span><br><span class="line">   docker run -d -p 127.0.0.1:5001:5000 training/webapp python app.py</span><br><span class="line">   指定容器绑定的网络地址，比如绑定 127.0.0.1。</span><br><span class="line">   docker run -it nginx:latest /bin/bash</span><br><span class="line">   使用镜像nginx:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。</span><br></pre></td></tr></table></figure>

<p><code>start | stop | restart</code> 启动、停止、重启容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>

<p><code>kill</code> 杀掉运行中的容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker kill [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">    -s : 向容器发送一个信号。</span><br><span class="line">注：docker kill $(docker ps -a -q)  杀死所有正在运行的容器</span><br></pre></td></tr></table></figure>

<p><code>rm</code> 删除一个或多个容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">    -f : 通过 SIGKILL 信号强制删除一个运行中的容器。</span><br><span class="line">    -l : 移除容器间的网络连接，而非容器本身。</span><br><span class="line">    -v : 删除与容器关联的卷。</span><br><span class="line">注：docker rm $(docker ps -a -q)  删除所有已经停止的容器。</span><br></pre></td></tr></table></figure>

<p><code>pause | unpause</code> 暂停、恢复容器中所有的进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pause [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">docker unpause [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>

<p><code>create</code> 创建一个新容器但不启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">docker create [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br><span class="line">    -a stdin : 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项。</span><br><span class="line">    -d : 后台运行容器，并返回容器ID。</span><br><span class="line">    -i : 以交互模式运行容器，通常与 -t 同时使用。</span><br><span class="line">    -P : 随机端口映射，容器内部端口随机映射到主机的高端口。</span><br><span class="line">    -p : 指定端口映射，格式为：主机(宿主)端口:容器端口。</span><br><span class="line">    -t : 为容器重新分配一个伪输入终端，通常与 -i 同时使用。</span><br><span class="line">    -m : 设置容器使用内存最大值。</span><br><span class="line">    --name=&quot;nginx-lb&quot; : 为容器指定一个名称。</span><br><span class="line">    --dns 8.8.8.8 : 指定容器使用的DNS服务器，默认和宿主一致。</span><br><span class="line">    --dns-search example.com : 指定容器DNS搜索域名，默认和宿主一致。</span><br><span class="line">    -h &quot;mars&quot; : 指定容器的hostname。</span><br><span class="line">    -e username=&quot;ritchie&quot; : 设置环境变量。</span><br><span class="line">    --env-file=[] : 从指定文件读入环境变量。</span><br><span class="line">    --cpuset=&quot;0-2&quot; or --cpuset=&quot;0,1,2&quot; : 绑定容器到指定CPU运行。</span><br><span class="line">    --net=&quot;bridge&quot; : 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型。</span><br><span class="line">    --link=[] : 添加链接到另一个容器。</span><br><span class="line">    --expose=[] : 开放一个端口或一组端口。</span><br><span class="line">    --volume , -v : 绑定一个卷。</span><br><span class="line">同docker run用法。</span><br></pre></td></tr></table></figure>

<p><code>exec</code> 在运行的容器中执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line">    -d : 分离模式: 在后台运行。</span><br><span class="line">    -i : 即使没有附加也保持STDIN 打开。</span><br><span class="line">    -t : 分配一个伪终端。</span><br></pre></td></tr></table></figure>

<p><code>ps</code>  列出容器信息。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker ps [OPTIONS]</span><br><span class="line">    -a : 显示所有的容器，包括未运行的。</span><br><span class="line">    -f : 根据条件过滤显示的内容。</span><br><span class="line">    --format : 指定返回值的模板文件。</span><br><span class="line">    -l : 显示最近创建的容器。</span><br><span class="line">    -n : 列出最近创建的n个容器。</span><br><span class="line">    --no-trunc : 不截断输出。</span><br><span class="line">    -q : 静默模式，只显示容器编号。</span><br><span class="line">    -s : 显示总的文件大小。</span><br><span class="line">    --filter : 过滤。</span><br><span class="line">注：CONTAINER ID: 容器 ID,IMAGE: 使用的镜像,COMMAND: 启动容器时运行的命令,CREATED: 容器的创建时间,STATUS: 容器状态,PORTS: 容器的端口信息和使用的连接类型(tcp\udp),NAMES: 自动分配的容器名称。</span><br></pre></td></tr></table></figure>

<p><code>inspect</code> 获取容器/镜像的元数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [OPTIONS] NAME|ID [NAME|ID...]</span><br><span class="line">    -f : 指定返回值的模板文件。</span><br><span class="line">    -s : 显示总的文件大小。</span><br><span class="line">    --type : 为指定类型返回JSON。</span><br><span class="line">注：docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; mymysql 获取正在运行的容器mymysql的 IP。</span><br></pre></td></tr></table></figure>

<p><code>top</code> 查看容器中运行的进程信息，支持 ps 命令参数 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top [OPTIONS] CONTAINER [ps OPTIONS]</span><br></pre></td></tr></table></figure>

<p><code>attach</code> 连接到正在运行中的容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker attach [OPTIONS] CONTAINER</span><br><span class="line">    --sig-proxy=false : 确保CTRL-D或CTRL-C不会关闭容器。</span><br></pre></td></tr></table></figure>

<p><code>events</code> 从服务器获取实时事件 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker events [OPTIONS]</span><br><span class="line">    -f : 根据条件过滤事件。</span><br><span class="line">    --since : 从指定的时间戳后显示所有事件。</span><br><span class="line">    --until : 流水时间显示到指定的时间为止。</span><br></pre></td></tr></table></figure>

<p><code>logs</code> 获取容器日志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker logs [OPTIONS] CONTAINER</span><br><span class="line">    -f : 跟踪日志输出</span><br><span class="line">    --since : 显示某个开始时间的所有日志</span><br><span class="line">    -t : 显示时间戳</span><br><span class="line">    --tail : 仅列出最新N条容器日志</span><br></pre></td></tr></table></figure>

<p><code>wait</code> 阻塞运行直到容器停止，然后打印出它的退出代码 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker wait [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>

<p><code>export</code> 将文件系统作为一个tar归档文件导出到STDOUT。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker export [OPTIONS] CONTAINER</span><br><span class="line">    -o : 将输入内容写到文件。</span><br><span class="line">注：docker export -o mysql-`date +%Y%m%d`.tar a404c6c174a2  将id为a404c6c174a2的容器按日期保存为tar文件。</span><br><span class="line">   docker export 1e560fca3906 &gt; ubuntu.tar  将id为1e560fca3906的容器保存为tar文件。</span><br></pre></td></tr></table></figure>

<p><code>port</code> 列出指定的容器的端口映射情况，或者查找将PRIVATE_PORT NAT到面向公众的端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port [OPTIONS] CONTAINER [PRIVATE_PORT[/PROTO]]</span><br></pre></td></tr></table></figure>

<p><code>commit</code> 从容器创建一个新的镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line">    -a : 提交的镜像作者。</span><br><span class="line">    -c : 使用Dockerfile指令来创建镜像。</span><br><span class="line">    -m : 提交时的说明文字。</span><br><span class="line">    -p : 在commit时，将容器暂停。</span><br><span class="line">注：docker commit -a &quot;runoob.com&quot; -m &quot;my apache&quot; a404c6c174a mymysql:v1 将容器a404c6c174a2保存为mymysql:v1新镜像。</span><br></pre></td></tr></table></figure>

<p><code>cp</code> 用于容器与主机之间的数据拷贝</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp [OPTIONS] CONTAINER:SRC_PATH  DEST_PATH|</span><br><span class="line">注：docker cp /www/runoob 96f7f14e99ab:/www/ 将主机/www/runoob目录拷贝到容器96f7f14e99ab的/www目录下。</span><br></pre></td></tr></table></figure>

<p><code>diff</code> 检查容器里文件结构的更改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker diff [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure>

<p><code>login | logout</code> 登录、登出到Docker镜像库，如果未指定镜像仓库地址，默认为官方仓库 Docker Hub </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker login [OPTIONS] [SERVER]</span><br><span class="line">    -u : 登陆的用户名。</span><br><span class="line">    -p : 登陆的密码。</span><br><span class="line">docker logout</span><br></pre></td></tr></table></figure>

<p><code>pull</code> 从镜像仓库中拉取或更新指定镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span><br><span class="line">    -a : 拉取所有 tagged 镜像。</span><br><span class="line">    --disable-content-trust : 忽略镜像的校验,默认开启。</span><br></pre></td></tr></table></figure>

<p><code>push</code> 将本地的镜像上传到镜像仓库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker push [OPTIONS] NAME[:TAG]</span><br><span class="line">    --disable-content-trust : 忽略镜像的校验,默认开启。</span><br></pre></td></tr></table></figure>

<p><code>search</code> 从Docker Hub查找镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker search [OPTIONS] TERM</span><br><span class="line">    --automated : 只列出 automated build类型的镜像。</span><br><span class="line">    --no-trunc : 显示完整的镜像描述。</span><br><span class="line">    -s : 列出收藏数不小于指定值的镜像。</span><br><span class="line">注：NAME: 镜像仓库源的名称,DESCRIPTION: 镜像的描述,OFFICIAL: 是否 docker 官方发布,stars: 类似 Github 里面的 star，表示点赞、喜欢的意思,AUTOMATED: 自动构建。</span><br></pre></td></tr></table></figure>

<p><code>images</code> 列出本地镜像列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br><span class="line">    -a : 列出本地所有的镜像(含中间映像层，默认情况下，过滤掉中间映像层)。</span><br><span class="line">    --digests : 显示镜像的摘要信息。</span><br><span class="line">    -f : 显示满足条件的镜像。</span><br><span class="line">    --format : 指定返回值的模板文件。</span><br><span class="line">    --no-trunc : 显示完整的镜像信息。</span><br><span class="line">    -q : 只显示镜像ID。</span><br><span class="line">注：REPOSITORY:来自于哪个仓库,TAG:镜像的标记,IMAGE ID:镜像的 ID 号,CREATED:创建时间,SIZE:镜像大小。</span><br></pre></td></tr></table></figure>

<p><code>rmi</code> 删除本地一个或多个镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br><span class="line">    -f : 强制删除。</span><br><span class="line">    --no-prune : 不移除该镜像的过程镜像，默认移除。</span><br><span class="line">注：docker rmi $(docker images -q -f dangling=true)  删除所有未打 dangling 标签的镜像 </span><br><span class="line">   docker rmi &lt;image id&gt;   通过镜像的id来删除指定镜像</span><br><span class="line">   docker rmi $(docker images -q -a)   删除所有镜像</span><br></pre></td></tr></table></figure>

<p><code>prune</code> 删除不再使用docker对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker image prune 删除所有未被tag标记和未被使用的容器对象。</span><br><span class="line">docker container prune 删除所有停止运行的容器。</span><br><span class="line">docker volume prune 删除所有未被挂载的卷。</span><br><span class="line">docker network prune 删除所有网络。</span><br><span class="line">docker system prune 删除所有docker资源。</span><br></pre></td></tr></table></figure>

<p><code>tag</code> 标记本地镜像，将其归入某一仓库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag [OPTIONS] IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]</span><br></pre></td></tr></table></figure>

<p><code>build</code> 使用Dockerfile创建镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">docker build [OPTIONS] PATH | URL | -</span><br><span class="line">    --build-arg=[] : 设置镜像创建时的变量。</span><br><span class="line">    --cpu-shares : 设置 cpu 使用权重。</span><br><span class="line">    --cpu-period : 限制 CPU CFS周期。</span><br><span class="line">    --cpu-quota : 限制 CPU CFS配额。</span><br><span class="line">    --cpuset-cpus : 指定使用的CPU id。</span><br><span class="line">    --cpuset-mems : 指定使用的内存 id。</span><br><span class="line">    --disable-content-trust : 忽略校验，默认开启。</span><br><span class="line">    -f : 指定要使用的Dockerfile路径。</span><br><span class="line">    --force-rm : 设置镜像过程中删除中间容器。</span><br><span class="line">    --isolation : 使用容器隔离技术。</span><br><span class="line">    --label=[] : 设置镜像使用的元数据。</span><br><span class="line">    -m : 设置内存最大值。</span><br><span class="line">    --memory-swap : 设置Swap的最大值为内存+swap，&quot;-1&quot;表示不限swap。</span><br><span class="line">    --no-cache : 创建镜像的过程不使用缓存。</span><br><span class="line">    --pull : 尝试去更新镜像的新版本。</span><br><span class="line">    --quiet, -q : 安静模式，成功后只输出镜像 ID。</span><br><span class="line">    --rm : 设置镜像成功后删除中间容器。</span><br><span class="line">    --shm-size : 设置/dev/shm的大小，默认值是64M。</span><br><span class="line">    --ulimit : Ulimit配置。</span><br><span class="line">    --tag, -t : 镜像的名字及标签，通常 name:tag 或者 name格式；可以在一次构建中为一个镜像设置多个标签。</span><br><span class="line">    --network : 默认 default。在构建期间设置RUN指令的网络模式。</span><br></pre></td></tr></table></figure>

<p><code>history</code> 查看指定镜像的创建历史</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker history [OPTIONS] IMAGE</span><br><span class="line">    -H : 以可读的格式打印镜像大小和日期，默认为true。</span><br><span class="line">    --no-trunc : 显示完整的提交记录。</span><br><span class="line">    -q : 仅列出提交记录ID。</span><br></pre></td></tr></table></figure>

<p><code>save</code> 将指定镜像保存成tar归档文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker save [OPTIONS] IMAGE [IMAGE...]</span><br><span class="line">    -o : 输出到的文件。</span><br></pre></td></tr></table></figure>

<p><code>load</code> 导入镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker load [OPTIONS]</span><br><span class="line">    --input, -i : 指定导入的文件，代替STDIN。</span><br><span class="line">    --quiet, -q : 精简输出信息。</span><br></pre></td></tr></table></figure>

<p><code>import</code> 从归档文件中创建镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]</span><br><span class="line">    -c : 应用docker指令创建镜像。</span><br><span class="line">    -m : 提交时的说明文字。</span><br></pre></td></tr></table></figure>

<p><code>info</code> 显示Docker系统信息，包括镜像和容器数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>

<p><code>version</code> 显示Docker版本信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker version [OPTIONS]</span><br><span class="line">    -f : 指定放回值的模块文件。</span><br></pre></td></tr></table></figure>



<h1 id="日常"><a href="#日常" class="headerlink" title="日常"></a>日常</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Docker 运行一个容器前需要本地存在有对应的镜像，使用的镜像如果在本地中不存在，docker就会自动从docker镜像仓库中下载，默认是从Docker Hub公共镜像源下载。</span><br><span class="line">镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</span><br><span class="line">容器ID，对每个容器来说都是唯一的，我们可以通过容器ID来查看对应的容器发生了什么。</span><br><span class="line">端口映射并不是唯一把docker连接到另一个容器的方法。</span><br><span class="line">docker 有一个连接系统允许将多个容器连接在一起，共享连接信息。</span><br><span class="line">docker 连接会创建一个父子关系，其中父容器可以看到子容器的信息。</span><br><span class="line"></span><br><span class="line">docker pull [options] container</span><br><span class="line">载入指定镜像。</span><br><span class="line">docker run container</span><br><span class="line">运行指定镜像。</span><br><span class="line">docker images </span><br><span class="line">查看本地主机上的镜像</span><br><span class="line">docker ps container</span><br><span class="line">查看指定容器运行端口映射，从而通过网络端口来访问运行在 docker 容器内的服务。</span><br><span class="line">docker port containerID 或 docker port contianer</span><br><span class="line">查看指定(ID或者名字)容器的某个确定端口映射到宿主机的端口号。</span><br><span class="line">docker exec container</span><br><span class="line">进入容器</span><br><span class="line">exit或CTRL+D </span><br><span class="line">退出容器</span><br><span class="line">docker logs</span><br><span class="line">查看容器内的标准输出</span><br><span class="line">docker stop containerID 或 docker stop contianer</span><br><span class="line">停止容器。</span><br><span class="line">docker start containerID</span><br><span class="line">启动已停止的容器</span><br><span class="line">docker restart containerID</span><br><span class="line">重启已停止的容器</span><br><span class="line">docker rm contianer</span><br><span class="line">删除不需要的容器。</span><br><span class="line">docker top contianer</span><br><span class="line">查看容器内部运行的进程</span><br><span class="line">docker search container</span><br><span class="line">寻找适合的镜像。</span><br><span class="line">docker commit container</span><br><span class="line">提交容器副本</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;&gt;构建镜像</span><br><span class="line">首先创建一个 Dockerfile 文件。Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。</span><br><span class="line">mkdir Dockerfile</span><br><span class="line">cd Dockerfile</span><br><span class="line">vi Dockerfile</span><br><span class="line">定制镜像</span><br><span class="line">每一个指令的前缀都必须是大写的。</span><br><span class="line">FROM container</span><br><span class="line">FROM：定制的镜像都是基于 FROM 的镜像，container是定制需要的基础镜像。后续的操作都是基于container。</span><br><span class="line">RUN：用于执行后面跟着的命令行命令。Dockerfile 的指令每执行一次都会在 docker 上新建一层。</span><br><span class="line">   shell 格式：RUN &lt;命令行命令&gt;</span><br><span class="line">   例如 RUN ./test.php dev offline</span><br><span class="line">   exec 格式：RUN [&quot;可执行文件&quot;, &quot;参数1&quot;, &quot;参数2&quot;]</span><br><span class="line">   例如 RUN [&quot;./test.php&quot;, &quot;dev&quot;, &quot;offline&quot;]</span><br><span class="line">查看 Dockerfile 文件</span><br><span class="line">cat Dockerfile</span><br><span class="line">使用 Dockerfile 文件</span><br><span class="line">docker build -t container .</span><br><span class="line">    -t ：指定要创建的目标镜像名。</span><br><span class="line">    . ：Dockerfile 文件所在目录，可以指定Dockerfile的绝对路径。</span><br><span class="line">注：由于 docker 的运行模式是 C/S。我们本机是 C，docker 引擎是 S。实际的构建过程是在 docker 引擎下完成的，所以这个时候无法用到我们本机的文件。这就需要把我们本机的指定目录下的文件一起打包提供给 docker 引擎使用。上下文路径下不要放无用的文件，因为会一起打包发送给 docker 引擎，如果文件过多会造成过程缓慢。</span><br></pre></td></tr></table></figure>















</section>
    
        
        <h2 class="footline">
            <a href="/tags/knowledge/#knowledge">knowledge</a>
        </h2>
    

    <footer id="post-meta" class="clearfix">
        <a href="/about/">
        <img class="avatar" src="/images/guchuan.JPG">
        <div>
            <span class="dark">Gu Chuan&#39;s blog</span>
            <span>没学过从来不是理由</span>
        </div>
        </a>
        <section id="sharing">
            <a title="Share to Twitter" class="twitter" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/02/01/Docker/ - Docker @" target="_blank" rel="noopener"><span class="icon-twitter">tweet</span></a>
            <a title="Share to Facebook" class="facebook" href="#" onclick="
                window.open(
                  'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
                  'facebook-share-dialog',
                  'width=626,height=436');
                return false;"><span class="icon-facebook-sign">Share</span>
            </a>
        </section>
    </footer>


  <section id="comment">
    <button class="btn" id="loadcmts" onclick="cmts.load();">Load Comments</button>
    <div id="gitment"></div>
    <script src='/js/gitment.browser.js'></script>
    <link rel="stylesheet" href=''>
    <script>
      var cmts={
        load:function cmts(){
          var gitment = new Gitment({
          
            id: "Docker",
          
            owner: "",
            repo: "",
            oauth: {
              client_id: "",
              client_secret: "",
            },
          })
          gitment.render('gitment');
          var loadcmt = document.getElementById("loadcmts");
          var imyourfather = loadcmt.parentNode;
          imyourfather.removeChild(loadcmts)
        }
      }
    </script>
  </section>


	<footer id="footer">
	<div id="social">
		<p class="small">©  Gu Chuan&#39;s blog| Powered by Hexo & 
			<a href="https://github.com/F0r3at/Lights" target="_blank" rel="noopener"> Lights</a>
		</p>
	</div>
</footer>

</section>

	<script src="//cdnjs.loli.net/ajax/libs/instantclick/3.0.1/instantclick.min.js" data-no-instant></script>
	<script data-no-instant>
		
		InstantClick.init('mousedown');
	</script>



